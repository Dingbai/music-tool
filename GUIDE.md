# 🎵 音乐学习助手 - 快速开始指南

欢迎使用音乐学习助手！本应用提供了完整的音乐学习和演奏辅助功能。

## 🚀 快速开始

### 1️⃣ 启动应用
```bash
pnpm dev
```
浏览器将自动打开 http://localhost:5173/

### 2️⃣ 主要功能区域

#### 左侧面板
- **简谱识别**: 上传包含简谱的图片，系统自动转换为五线谱
- **五线谱编辑**: 直接编辑ABC格式的乐谱，实时预览

#### 右侧面板
- **五线谱渲染**: 实时显示五线谱
- **播放控制**: 用口琴音色演奏乐谱
- **音准检测**: 实时检测音高并评估准确度

## 💡 使用场景

### 场景1: 识别纸质简谱
1. 拍照或扫描简谱
2. 点击"📤 上传简谱图片"上传图片
3. 等待OCR识别完成
4. 系统自动生成五线谱和ABC记谱

### 场景2: 手动创建乐谱
1. 点击"✏️ 编辑ABC记谱"按钮
2. 编辑或粘贴ABC格式的乐谱
3. 点击"💾 保存"查看效果

### 场景3: 练习演奏
1. 点击"▶️ 播放"听乐谱演奏
2. 跟随音符练习
3. 准备好时，点击"🎙️ 开始检测"
4. 唱出或吹出相同的音符

### 场景4: 检查音准
1. 点击"🎙️ 开始检测"激活麦克风
2. 发出一个音符
3. 查看检测到的音高和准确度
4. 根据反馈调整音高

## 📚 ABC记谱法快速参考

### 基本音符
| 符号 | 说明 | 示例 |
|------|------|------|
| 1-7  | 低音（Do到Si） | 1 2 3 4 5 6 7 |
| A-G, a-g, b | 标准音高标记 | C D E F G A B |
| c-b  | 高音 | c d e f g a b |
| z    | 休止符 | z |

### 修饰符
| 符号 | 说明 | 示例 |
|------|------|------|
| #    | 升号 | C# 或 1# |
| b    | 降号 | Bb 或 1b |
| /    | 缩短时值（减半） | C/2 （四分音符变八分音符） |
| 数字 | 延长时值 | C2 （两倍时值） |

### 结构
```
X:1              # 曲号
T:歌曲名称       # 曲名
M:4/4            # 拍号（4/4表示四四拍）
L:1/8            # 基础音符时值（1/8表示八分音符）
K:C              # 调号（C表示C大调）
```

### 完整例子
```
X:1
T:小星星
M:4/4
L:1/8
K:C
CCGGAAG FFEEDC ddddcc
```

## 🎙️ 音准检测说明

### 工作原理
- 使用Web Audio API的频率分析
- 实时检测基频
- 比对目标音高（如A4=440Hz）
- 计算准确度百分比

### 准确度说明
- **90-100%**: 音准完美！🎵
- **80-90%**: 非常好！
- **70-80%**: 还不错，继续加油！
- **60-70%**: 需要多加练习
- **低于60%**: 建议再仔细听听示例音

## 🎨 界面说明

### 颜色方案
- **紫色渐变背景**: 现代时尚设计
- **卡片设计**: 信息分类清晰
- **绿色按钮**: 播放和成功操作
- **红色按钮**: 停止和取消操作

### 交互提示
- 按钮悬停时有阴影和上升效果
- 进度条显示加载进度
- 动画脉冲表示正在监听麦克风

## ⚙️ 浏览器要求

### 必需功能
- ✅ Web Audio API
- ✅ Media Devices API（用于麦克风访问）
- ✅ Canvas API（用于五线谱渲染）
- ✅ FileReader API（用于图片上传）

### 支持的浏览器
- Chrome/Chromium 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 权限申请
首次使用音准检测时，浏览器会请求以下权限：
- **麦克风访问**: 用于音准检测
- **其他**：根据浏览器和系统的安全策略

## 🔧 故障排除

### 问题：无法识别简谱
**解决方案**:
1. 确保图片清晰，光线充足
2. 简谱应该是黑白或高对比度
3. 尝试使用标准简谱格式的图片

### 问题：音量太小或太大
**解决方案**:
1. 检查系统音量
2. 检查浏览器标签页音量
3. 调整设备音量

### 问题：音准检测不工作
**解决方案**:
1. 允许浏览器访问麦克风
2. 检查麦克风是否正常工作
3. 使用更清晰、稳定的音源
4. 在安静的环境中使用

### 问题：五线谱不显示
**解决方案**:
1. 刷新页面
2. 确保ABC格式正确
3. 检查浏览器控制台是否有错误

## 📝 ABC格式完整语法

```
X:1                          # 必需：序号
T:Title                      # 可选：标题
T:Subtitle                   # 可选：副标题
M:4/4                        # 必需：拍号
L:1/8                        # 必需：默认音符时值
K:C                          # 必需：调号

[music notes]                # 乐谱
```

### 音符示例
```
C D E F G A B      # 标准C大调
c d e f g a b      # 高音
C/2 D/2            # 半个时值
C2 D2              # 两倍时值
C3                 # 三倍时值
C/4                # 四分一时值
```

## 💾 提示

- 可以复制/粘贴五线谱编辑器中的ABC格式代码
- 所有操作实时保存在浏览器中
- 刷新页面会恢复上一次的乐谱

## 🌟 高级技巧

1. **批量输入**: 可以一次性粘贴多个小节
2. **调号转换**: 手动编辑ABC中的K:字段来改变调号
3. **拍号调整**: 修改M:字段来改变拍号
4. **时值精确化**: 使用数字和/组合来精确控制时值

## 📞 需要帮助？

如遇到问题，请：
1. 检查浏览器控制台（F12）了解错误信息
2. 清除浏览器缓存
3. 尝试使用其他浏览器
4. 检查网络连接

---

**祝你练习愉快！🎵**
